---
// src/pages/payroll/index.astro
import Layout from "../../layouts/Layout.astro";
import { DashboardLayout } from "../../components/layout/DashboardLayout";
import { PayrollOverview } from "../../components/payroll/PayrollOverview";
import { mockEmployees } from "../../data/mockData";

// Generate mock payroll data
const mockPayrollRecords = mockEmployees.map((employee, index) => ({
	id: `payroll-${employee.id}`,
	employeeId: employee.id,
	period: "2024-03",
	basicSalary: employee.salary,
	allowances: Math.round(employee.salary * 0.1),
	deductions: Math.round(employee.salary * 0.15),
	netSalary: Math.round(employee.salary * 0.95),
	payDate: "2024-03-30",
	status: index % 3 === 0 ? "paid" : index % 3 === 1 ? "processed" : "draft",
}));
---

<Layout title="Payroll Management - HRIS">
	<DashboardLayout client:load>
		<div class="space-y-6">
			<div>
				<h1 class="text-3xl font-bold text-gray-900">Payroll Management</h1>
				<p class="text-gray-600 mt-2">Manage employee compensation and payroll processing.</p>
			</div>

			<PayrollOverview payrollRecords={mockPayrollRecords} employees={mockEmployees} client:load />
		</div>
	</DashboardLayout>
</Layout>
